<!DOCTYPE html>
<html>
<meta charset="utf-8"/>
<head>
<title>Horários</title>
<style>
table {
    font-family: arial, sans-serif;
    font-size: 13px;
    border-collapse: collapse;
    width: 100%;
    height: 100%;
    min-height: 100%;
    text-align :center;
}

td, th {
    border: 1px solid #8C8C8C;
    text-align: center;
    padding: 3px;
}

tr:nth-child(even) {
    background-color: #dddddd;
}
#outer
{
    width:100%;
    text-align: center;
}
.inner
{
    display: inline-block;
}
</style>


</head>
<body>
<div style="overflow:scroll;">
     
     <div style="float:left"></div>
<table>
  <tr>
    <th>Horário</th>
    <th>1001</th>
    <th>1002</th>
    <th>1003</th>
    <th>1004</th>
    <th>2001</th>
    <th>2002</th>
    <th>2003</th>
    <th>2004</th>
    <th>3001</th>
    <th>3002</th>
    <th>3003</th>
    <th>3004</th>
  
  </tr>
 <center>

<br>

  <tr>
    <td>7:00 - 7:50</td>
    <td> value{0000}<br></td>
    <td> value{1000} </td>
    <td> value{2000}</td>
    <td> value{3000}</td>
    <td> value{4000} </td>
    <td> value{5000} </td>
    <td> value{6000} </td>
    <td> value{7000}</td>
    <td> value{8000}</td>
    <td> value{9000} </td>
    <td> value{10000}</td>
    <td> value{11000} </td>

  </tr>

  <tr>
    <td>7:50 - 8:40</td> 
   <td> value{0010} </td>
 <td> value{1010} </td>
 <td> value{2010}</td>
 <td> value{3010}</td>
 <td> value{4010} </td>
 <td> value{5010} </td>
 <td> value{6010} </td>
 <td> value{7010} </td>
 <td> value{8010} </td>
 <td> value{9010} </td>
 <td> value{10010} </td>
 <td> value{11010} </td>
    
  </tr>
  <tr>
    <td>8:40 - 9:30</td> 
   <td> value{0020} </td>
 <td> value{1020} </td>
 <td> value{2020} </td>
 <td> value{3020} </td>
 <td> value{4020} </td>
 <td> value{5020}</td>
 <td> value{6020} </td>
 <td> value{7020} </td>
 <td> value{8020} </td>
 <td> value{9020} </td>
 <td> value{10020} </td>
 <td> value{11020} </td>
    
  </tr>
  <tr>
    <td>9:50 - 10:40</td> 
  <td> value{0030} </td>
 <td> value{1030} </td>
 <td> value{2030} </td>
 <td> value{3030} </td>
 <td> value{4030} </td>
 <td> value{5030} </td>
 <td> value{6030} </td>
 <td> value{7030} </td>
 <td> value{8030} </td>
 <td> value{9030} </td>
 <td> value{10030} </td>
 <td> value{11030} </td>
   
  </tr>
  <tr>
    <td>10:40 - 11:30</td> 
     <td> value{0040} </td>
 <td> value{1040} </td>
 <td> value{2040} </td>
 <td> value{3040}</td>
 <td> value{4040}</td>
 <td> value{5040} </td>
 <td> value{6040}</td>
 <td> value{7040} </td>
 <td> value{8040} </td>
 <td> value{9040} </td>
 <td> value{10040} </td>
 <td> value{11040} </td>
   
  </tr>
  <tr>
    <td>11:30 - 12:20</td>
   <td> value{0050}</td>
 <td> value{1050} </td>
 <td> value{2050} </td>
 <td> value{3050} </td>
 <td> value{4050} </td>
 <td> value{5050} </td>
 <td> value{6050} </td>
 <td> value{7050}</td>
 <td> value{8050} </td>
 <td> value{9050} </td>
 <td> value{10050} </td>
 <td> value{11050} </td>
    
  </tr>
  <tr>
    <td>12:30 - 13:20</td>
    <td> value{0060} </td>
 <td> value{1060} </td>
 <td> value{2060} </td>
 <td> value{3060} </td>
 <td> value{4060} </td>
 <td> value{5060} </td>
 <td> value{6060} </td>
 <td> value{7060} </td>
 <td> value{8060}</td>
 <td> value{9060}</td>
 <td> value{10060} </td>
 <td> value{11060}</td>
   
  </tr>
    <tr>
    <td>13:20 - 14:10</td>
    <td> value{0070}</td>
 <td> value{1070} </td>
 <td> value{2070} </td>
 <td> value{3070} </td>
 <td> value{4070}</td>
 <td> value{5070} </td>
 <td> value{6070} </td>
 <td> value{7070} </td>
 <td> value{8070} </td>
 <td> value{9070} </td>
 <td> value{10070}</td>
 <td> value{11070}</td>
    
  </tr>
    <tr>
    <td>14:10 - 15:00</td>
     <td> value{0080} </td>
 <td> value{1080} </td>
 <td> value{2080}</td>
 <td> value{3080} </td>
 <td> value{4080} </td>
 <td> value{5080} </td>
 <td> value{6080} </td>
 <td> value{7080} </td>
 <td> value{8080} </td>
 <td> value{9080}</td>
 <td> value{10080} </td>
 <td> value{11080} </td>
    
  </tr>
    <tr>
    <td>15:20 - 16:10</td>
     <td> value{0090} </td>
 <td> value{1090}</td>
 <td> value{2090} </td>
 <td> value{3090}</td>
 <td> value{4090} </td>
 <td> value{5090} </td>
 <td> value{6090} </td>
 <td> value{7090} </td>
 <td> value{8090} </td>
 <td> value{9090} </td>
 <td> value{10090} </td>
 <td> value{11090}</td>
 
  </tr>
    <tr>
    <td>16:10 - 17:00</td>
  <td> value{00100} </td>
 <td> value{10100}</td>
 <td> value{20100} </td>
 <td> value{30100}</td>
 <td> value{40100} </td>
 <td> value{50100}</td>
 <td> value{60100} </td>
 <td> value{70100}</td>
 <td> value{80100} </td>
 <td> value{90100} </td>
 <td> value{100100} </td>
 <td> value{110100} </td>
  
  </tr>
  </center>
</table>
<center>
 <h3 id = "daytitle"> Mostrando o horário de dia </h3>
<div id="outer">
  <div class="inner"><button type="submit" class="msgBtn" onClick="setvaleu(0)" >Segunda - Feira</button></div>
  <div class="inner"><button type="submit" class="msgBtn2" onClick="setvaleu(1)" >Terça - Feira</button></div>
  <div class="inner"><button class="msgBtnBack" onclick="setvaleu(2)">Quarta - Feira</button></div>
  <div class="inner"><button type="submit" class="msgBtn" onClick="setvaleu(3)" >Quinta - Feira</button></div>
  <div class="inner"><button type="submit" class="msgBtn2" onClick="setvaleu(4)" >Sexta - Feira</button></div>
  
</div>
<br>
Essa plataforma foi desenvolvida por Nathan Vieira e Eduarda Helena</center>
 </div>
</body>
</html>
<script type="text/javascript">
      var dias = [ "Segunda - Feira", "Terça - Feira", "Quarta - Feira", "Quinta - Feira", "Sexta - Feira"  ];    
      var leu = false;
      var values;      
      var oldValues= new Array();      
      var thisday  = nowDay();
     
        // criando array dentro de array (matriz)
        for (var i = 0; i < 11; i++)
        {
          //a[i] = new Array();
          oldValues.push(new Array());
        }               
        function Write(dia,first)
        {
          dia = parseInt(dia);
          for (var z =0;z<11;z++){            
              for (var i =0;i<12;i++)
              {
                if (leu){
                 // console.log(values[i][dia][z][0]);
                  var toReplace = first==true ? "value{"+i+"0"+z+"0}" :oldValues[z][i] ;
                
                   document.body.innerHTML = document.body.innerHTML.replace( toReplace, 

                        (values[i][dia][z][0]==null ? "---" : values[i][dia][z][0]) +"<br>"+
                    (values[i][dia][z][1]==null ? "---":values[i][dia][z][1])
                    +"<br>"+(values[i][dia][z][2]==null ? "---":values[i][dia][z][2]));

                    oldValues[z][i] = (values[i][dia][z][0]==null ? "---" : values[i][dia][z][0]) +"<br>"+
                    (values[i][dia][z][1]==null ? "---":values[i][dia][z][1])
                    +"<br>"+(values[i][dia][z][2]==null ? "---":values[i][dia][z][2]);
                 }
              }
            }
        }  
                
        function setvaleu(day)
        {
          thisday = day;
           Write(day,false);
            document.getElementById("daytitle").innerHTML ="Mostrando o horário de "+dias[day]+"<br>";
            
        }
         function readTextFile(file, day,first)
        
        {
            var rawFile = new XMLHttpRequest();
            rawFile.open("GET", file, false);
            rawFile.overrideMimeType('text/xml; charset=iso-8859-1');                              
                  rawFile.onreadystatechange = function ()
                  {
                    if (this.readyState===this.DONE){                  
                             var allText = rawFile.responseText;                           

                              values = JSON.parse(allText);
                              leu = true;
                              console.log("chegou");
                             Write(day,first);
                          }
                      
                    }
                    rawFile.send(null);
                      
                               
              }
        function nowDay()
        {
          if (window.location.href.toString().split('?').length ==2)
          {
            console.log("hey");
            var c = window.location.href.toString().split('?');
            var dayy= c[1][c[1].length-1];
            if (c[1][0]==="d" &&c[1][1]==="i"&c[1][2]==="a"&&c[1][3]==="=")
            {
               var intday = parseInt(dayy);
              if (intday>=0 &&intday<=4)
                return intday;
                            }
          }
          else console.log("falha");
          now = new Date();
          DayOfWeek = now.getDay();
           if (DayOfWeek == 0)
          {
            
             return 0;
          }
             else if (DayOfWeek == 6)
           {
            
              return 4;
            }
            else 
              {
                
               return DayOfWeek - 1;
        }
      }
      document.getElementById("daytitle").innerHTML = "Mostrando o horário de "+dias[thisday]+"<br>";

readTextFile("file.txt",thisday,true);
 var counter =0;
function loop()
{
  counter++;  
  if (counter ==300) {
      window.location.replace("http://ben10go.96.lt/site.html?dia="+thisday);

  }
  setTimeout(loop,1000);
}
   
loop();
</script>
